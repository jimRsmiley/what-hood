CREATE SEQUENCE users_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE role_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE public.user_user_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE users (id INT NOT NULL, username VARCHAR(255) DEFAULT NULL, email VARCHAR(255) NOT NULL, displayName VARCHAR(50) DEFAULT NULL, password VARCHAR(128) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_1483A5E9F85E0677 ON users (username);
CREATE UNIQUE INDEX UNIQ_1483A5E9E7927C74 ON users (email);
CREATE TABLE user_role_linker (user_id INT NOT NULL, role_id INT NOT NULL, PRIMARY KEY(user_id, role_id));
CREATE INDEX IDX_61117899A76ED395 ON user_role_linker (user_id);
CREATE INDEX IDX_61117899D60322AC ON user_role_linker (role_id);
CREATE TABLE role (id INT NOT NULL, parent_id INT DEFAULT NULL, roleId VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_57698A6AB8C2FD88 ON role (roleId);
CREATE INDEX IDX_57698A6A727ACA70 ON role (parent_id);
ALTER TABLE user_role_linker ADD CONSTRAINT FK_61117899A76ED395 FOREIGN KEY (user_id) REFERENCES users (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE user_role_linker ADD CONSTRAINT FK_61117899D60322AC FOREIGN KEY (role_id) REFERENCES role (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE role ADD CONSTRAINT FK_57698A6A727ACA70 FOREIGN KEY (parent_id) REFERENCES role (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE "public"."user" ADD user_id INT NOT NULL;
ALTER TABLE "public"."user" ADD username VARCHAR(255) DEFAULT NULL;
ALTER TABLE "public"."user" ADD email VARCHAR(255) DEFAULT NULL;
ALTER TABLE "public"."user" ADD display_name VARCHAR(50) DEFAULT NULL;
ALTER TABLE "public"."user" ADD password VARCHAR(128) NOT NULL;
ALTER TABLE "public"."user" ADD state SMALLINT DEFAULT NULL;
CREATE UNIQUE INDEX UNIQ_327C5DE7F85E0677 ON "public"."user" (username);
CREATE UNIQUE INDEX UNIQ_327C5DE7E7927C74 ON "public"."user" (email);
ALTER TABLE "public"."user" ADD PRIMARY KEY (user_id);
